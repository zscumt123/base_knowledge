# 浏览器知识汇总

## 浏览器进程
### 1. 单进程浏览器的问题

- 不稳定，出错会导致浏览器崩溃
- 不流畅，脚本或者插件会使得浏览器变卡顿,内存泄露
- 不安全，插件可以获取操作系统资源，脚本可以利用浏览器漏洞获取系统权限

### 2. 多进程浏览器
- 浏览器进程、渲染进程、插件进程、网络进程、GPU进程、进程间相互隔离
- 页面或者插件崩溃时，影响的只是当前页面，不会影响浏览器或者其他页面
- 即使js阻塞了渲染进程，影响的也只是当前页面，关闭一个页面时候，整个渲染
进程被关闭，该进程所占用的内存被回收，不会造成内存泄露
- 插件进程和渲染进程运行在沙箱中的，恶意程序无法突破沙箱获取到系统权限
#### 2-1.浏览器的进程
- 浏览器进程：负责界面显示，用户交互，子进程管理，提供存储等功能
- 渲染进程： 将html，css，js转化为网页，默认情况下，chrome会为每个Tab
标签创建一个渲染进程，渲染进程运行在沙箱模式下
- GPU进程： UI界面采用GPU绘制
- 网络进程： 负责页面网络资源的加载
- 插件进程： 主要负责插件的运行，保证插件崩溃不会对页面造成影响
#### 2-2.多进程浏览器的问题
- 更高的资源占用
- 更复杂的体系架构
#### 2-3. 未来面向服务的架构（SOA）
- 各个模块被做成独立的服务，每个服务在独立的进程中运行，访问服务
必须使用定义好的接口，通过IPC通信，构建一个更内聚，松耦合，易于维护和扩展
的系统

### 3. 在浏览器里面，从输入url到页面展示，经历了什么
- 浏览器会判断输入的关键字是搜索内容，还是URL，如果是搜索内容，会使用
默认的搜索引擎，来合成新的带关键字的URL，如果是URL，浏览器准备新页面
执行当前页面的beforeunload事件，标签页面上的图标变成加载状态
- 页面请求资源，浏览器进程会通过IPC通信把URL发送网络进程，网络进程接收
到URL，先查找本地缓存是否缓存了资源，如果有，直接返回资源给浏览器进程
如果没有，直接进入网络请求流程，DNS解析，获取到资源服务器的IP地址，
建立TCP连接，如果是https，需要建立TLS连接，建立连接后，构建请求行，请求头等
信息，向服务器发送请求，服务器接收到请求后，将资源发送给网络进程
- 网络进程解析相应头，如果是重定向，重新发起http请求，接下来根据content-type
判断资源类型，如果是text/html,就准备渲染进程
- 提交文档，网络进程将http响应头数据转发给浏览器进程，浏览器进程通知渲染进程，渲染
进程和网络进程建立管道连接，数据交给渲染进程。渲染进程最后向浏览器进程发送确认提交
浏览器进程更新界面状态
- 渲染阶段

